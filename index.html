<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Audioguide der Ev. Stadtkirche von Hessisch Lichtenau</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#f1f3f5" />
  <!-- Suchmaschinen ausschlieÃŸen -->
  <meta name="robots" content="noindex,nofollow,noarchive,nosnippet" />
  <meta name="googlebot" content="noindex,nofollow,noarchive,nosnippet" />
  <style>
    :root{
      --bg:#f1f3f5; --card:#f6f7f9; --fg:#2b3035; --muted:#6b7280; --line:#d9dee5;
      --play:#0f172a; --accent:#0f172a; --pill:#eceff3;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      -webkit-font-smoothing:antialiased;
    }
    .wrap{max-width:760px;margin:0 auto;padding:10px 12px 18px;display:flex;flex-direction:column;gap:10px}

    /* Topbar */
    .topbar{min-height:48px;display:flex;align-items:center;justify-content:space-between;gap:8px}
    .title{font-size:14px;font-weight:400;color:var(--muted);margin-right:8px}
    .lang{display:inline-flex;border:1px solid var(--line);background:var(--pill);border-radius:999px;overflow:hidden}
    .lang button{border:0;background:transparent;color:var(--muted);font-weight:600;font-size:12px;padding:6px 12px;display:inline-flex;align-items:center;gap:8px;cursor:pointer}
    .lang button.active{color:var(--fg);background:#e9edf2}

    /* Karte */
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px;display:flex;flex-direction:column;gap:10px}

    /* Cover */
    .cover-wrap{position:relative; border-radius:12px; overflow:hidden; border:1px solid var(--line); width:100%; aspect-ratio:1/1; background:#e6eaef;}
    .cover{width:100%;height:100%;object-fit:cover;display:block}

    /* Timeline */
    .scrub-overlay{position:absolute; left:0; right:0; bottom:0; padding:10px; background:linear-gradient(180deg, rgba(241,243,245,0) 0%, rgba(246,247,249,.9) 40%, rgba(246,247,249,.95) 100%);}
    .progress{position:relative;width:100%;height:6px;border-radius:999px;background:#e2e7ee;border:1px solid var(--line);cursor:pointer}
    .bar{position:absolute;left:0;top:0;height:100%;width:0%;background:var(--accent);border-radius:999px}
    .thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:14px;height:14px;border-radius:50%;background:var(--accent)}
    .times{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:6px}

    /* Controls */
    .controls{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;margin-top:2px}
    .skip{justify-self:center;display:inline-flex;align-items:center;gap:6px;color:var(--muted);font-size:14px;background:transparent;border:0;cursor:pointer}
    .skip svg{width:16px;height:16px;opacity:.65;fill:currentColor}
    .play{width:66px;height:66px;border-radius:50%;background:var(--play);color:#fff;border:0;cursor:pointer;display:grid;place-items:center}
    .play svg{width:24px;height:24px;fill:#fff}

    /* Tempo */
    .speed{display:flex;align-items:center;gap:8px;justify-content:center;margin-top:6px}
    .speed .label{font-size:12px;color:var(--muted)}
    .speed button{border:1px solid var(--line);background:#eef2f6;color:#2f3640;padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer}
    .speed button.active{border-color:#b7c2cf;box-shadow:0 0 0 1px #b7c2cf inset}

    /* Footer */
    footer{color:#7d8590;text-align:center;font-size:12px;margin-top:6px}
    footer div{margin:4px 0}
    footer a{color:#7d8590;text-decoration:none}
    footer a:hover{text-decoration:underline;color:#2b3035}

    /* Modal */
    .modal{position:fixed; inset:0; background:rgba(0,0,0,.42);display:none; align-items:center; justify-content:center; z-index:9999;}
    .modal[open]{display:flex}
    .modal-card{width:min(780px,92vw); max-height:86vh; background:#fff; color:#1f2530; border-radius:14px; overflow:hidden; display:flex; flex-direction:column;}
    .modal-head{display:flex; justify-content:space-between; padding:12px 16px; background:#f6f7f9;}
    .modal-body{padding:14px 16px; overflow:auto; font-size:14px; line-height:1.55;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="title">Audioguide der Ev. Stadtkirche von Hessisch Lichtenau</div>
      <div class="lang">
        <button id="btn-de" class="active">ðŸ‡©ðŸ‡ª DE</button>
        <button id="btn-en">ðŸ‡¬ðŸ‡§ EN</button>
      </div>
    </div>

    <section class="card">
      <div class="cover-wrap">
        <img src="cover.jpeg" alt="Cover" class="cover" />
        <div class="scrub-overlay">
          <div class="progress" id="progress">
            <div class="bar" id="bar"></div>
            <div class="thumb" id="thumb"></div>
          </div>
          <div class="times"><span id="cur">0:00</span><span id="dur">0:00</span></div>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls">
        <!-- ZurÃ¼ck -->
        <button id="back15" class="skip" aria-label="15 Sekunden zurÃ¼ck">
          <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
          <span>-15s</span>
        </button>
        <!-- Play -->
        <button id="btn-play" class="play" aria-label="Abspielen">
          <svg id="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7-11-7z"/></svg>
          <svg id="icon-pause" viewBox="0 0 24 24" style="display:none"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
        </button>
        <!-- Vor -->
        <button id="fwd15" class="skip" aria-label="15 Sekunden vor">
          <span>+15s</span>
          <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
        </button>
      </div>

      <!-- Tempo -->
      <div class="speed">
        <span class="label">Tempo</span>
        <button data-rate="0.8">0.8Ã—</button>
        <button data-rate="1" class="active">1Ã—</button>
        <button data-rate="1.1">1.1Ã—</button>
        <button data-rate="1.25">1.25Ã—</button>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div>Â© <span id="year"></span> Evangelische Stadtkirche Hessisch Lichtenau</div>
      <div>Intro/Outro-Musik: Track â€žLondonâ€œ Â· Musik von <a href="https://www.fiftysounds.com" target="_blank">fiftysounds.com</a></div>
      <div><a class="legal-link" id="openLegal">Impressum & Datenschutz</a></div>
    </footer>
  </div>

  <audio id="audio" preload="metadata"></audio>

  <!-- Modal -->
  <div class="modal" id="legalModal">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Impressum & Datenschutz</h3>
        <button id="closeLegal">âœ•</button>
      </div>
      <div class="modal-body">
        <h4>Impressum</h4>
        <p><strong>Ev. Kirchengemeinde Hessisch Lichtenau</strong><br>
        MÃ¼hlweg 21 Â· 37235 Hessisch Lichtenau<br>
        Telefon: 05602 â€“ 2403<br>
        E-Mail: <a href="mailto:hessischlichtenau.gemeindebuero@ekkw.de">hessischlichtenau.gemeindebuero@ekkw.de</a></p>
        <p>Die Ev. Kirchengemeinde Hessisch Lichtenau ist eine KÃ¶rperschaft des Ã¶ffentlichen Rechts. Vertretungsberechtigt ist der Kirchenvorstand.</p>
        <h4>Verantwortlich nach Â§18 MStV</h4>
        <p>Pfarrerin Anja Peters, MÃ¼hlweg 21, 37235 Hessisch Lichtenau</p>
        <h4>Datenschutz</h4>
        <p>Es werden keine Tracking-Dienste oder Cookies eingesetzt. Technisch notwendige Protokolle des Hosting-Providers werden kurzzeitig gespeichert.</p>
        <p>Lokale Speicherung (Sprache & Wiedergabegeschwindigkeit) erfolgt ausschlieÃŸlich in Ihrem Browser und kann jederzeit gelÃ¶scht werden.</p>
        <h4>Ihre Rechte</h4>
        <p>Nach DSGVO: Auskunft, Berichtigung, LÃ¶schung, EinschrÃ¤nkung, Widerspruch, DatenÃ¼bertragbarkeit. Beschwerden bei der AufsichtsbehÃ¶rde mÃ¶glich.</p>
        <h4>Musiknachweis</h4>
        <p>Intro/Outro-Musik: Track â€žLondonâ€œ Â· Musik von <a href="https://www.fiftysounds.com" target="_blank">www.fiftysounds.com</a> (Attribution erforderlich).</p>
      </div>
    </div>
  </div>

  <script>
    (()=> {
      const files={de:"Audioguide Stadtkirche (deutsch).mp3",en:"Audioguide Stadtkirche (englisch).mp3"};
      const audio=document.getElementById("audio"),
            btnPlay=document.getElementById("btn-play"),
            iconPlay=document.getElementById("icon-play"),
            iconPause=document.getElementById("icon-pause"),
            btnDe=document.getElementById("btn-de"),
            btnEn=document.getElementById("btn-en"),
            back15=document.getElementById("back15"),
            fwd15=document.getElementById("fwd15"),
            progress=document.getElementById("progress"),
            bar=document.getElementById("bar"),
            thumb=document.getElementById("thumb"),
            cur=document.getElementById("cur"),
            dur=document.getElementById("dur");

      document.getElementById("year").textContent=new Date().getFullYear();

      const fmt=s=>(isNaN(s)||!isFinite(s))?"0:00":`${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,"0")}`;
      let lang=localStorage.getItem("hl-lang")||"de";

      function updatePlayIcon(p){iconPlay.style.display=p?"block":"none";iconPause.style.display=p?"none":"block";}
      function updateProgressUI(){
        if(!audio.duration) return;
        const pct=(audio.currentTime/audio.duration)*100;
        bar.style.width=pct+"%";thumb.style.left=pct+"%";
        cur.textContent=fmt(audio.currentTime); dur.textContent=fmt(audio.duration);
      }
      function setSource(){audio.src=lang==="de"?files.de:files.en;audio.load();}
      function startPlayback(){audio.play().then(()=>updatePlayIcon(false)).catch(()=>updatePlayIcon(true));}
      function setLanguage(next){lang=next;localStorage.setItem("hl-lang",lang);btnDe.classList.toggle("active",lang==="de");btnEn.classList.toggle("active",lang==="en");setSource();startPlayback();}
      setSource();

      btnDe.onclick=()=>setLanguage("de");btnEn.onclick=()=>setLanguage("en");
      btnPlay.onclick=()=>{if(audio.paused){startPlayback();}else{audio.pause();updatePlayIcon(true);}};
      back15.onclick=()=>{audio.currentTime=Math.max(0,audio.currentTime-15);updateProgressUI();};
      fwd15.onclick =()=>{audio.currentTime=Math.min(audio.duration||audio.currentTime+15,audio.currentTime+15);updateProgressUI();};
      audio.addEventListener("loadedmetadata",updateProgressUI);
      audio.addEventListener("timeupdate",updateProgressUI);
      audio.addEventListener("ended",()=>updatePlayIcon(true));

      // Scrubbing
      let seeking=false;
      function pctFromEvent(e){const r=progress.getBoundingClientRect();const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left;return Math.min(Math.max(0,x/r.width),1);}
      function seekTo(p){if(!audio.duration) return; audio.currentTime=p*audio.duration;updateProgressUI();}
      progress.addEventListener("mousedown",e=>{seeking=true;seekTo(pctFromEvent(e));});
      window.addEventListener("mousemove",e=>{if(seeking)seekTo(pctFromEvent(e));});
      window.addEventListener("mouseup",()=>seeking=false);

      // Modal
      const modal=document.getElementById('legalModal');
      const open=document.getElementById('openLegal');
      const close=document.getElementById('closeLegal');
      open.onclick=()=>modal.setAttribute('open','');
      close.onclick=()=>modal.removeAttribute('open');
      modal.onclick=(e)=>{if(e.target===modal)modal.removeAttribute('open');};
    })();
  </script>
</body>
</html>
