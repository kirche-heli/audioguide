<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Audioguide der Ev. Stadtkirche von Hessisch Lichtenau</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#f1f3f5" />
  <!-- Suchmaschinen ausschlieÃŸen -->
  <meta name="robots" content="noindex,nofollow,noarchive,nosnippet" />
  <meta name="googlebot" content="noindex,nofollow,noarchive,nosnippet" />
  <style>
    :root{
      /* Audio-Cult nahes, helles Theme */
      --bg:#f1f3f5;         /* Seitenhintergrund */
      --card:#f6f7f9;       /* Kartenhintergrund (ganz leicht abgesetzt) */
      --fg:#2b3035;         /* Text */
      --muted:#6b7280;      /* dezente Texte */
      --line:#d9dee5;       /* Linien/Border */
      --play:#0f172a;       /* dunkles Navy fÃ¼r Play-Button */
      --accent:#0f172a;     /* Akzent (Progress/Thumb) */
      --pill:#eceff3;       /* fÃ¼r Sprach-Pill/Buttons */
    }
    @media (prefers-color-scheme: dark){
      /* Falls GerÃ¤t im Dark Mode â€“ trotzdem helle AC-Optik beibehalten */
      :root{ --bg:#f1f3f5; --card:#f6f7f9; --fg:#2b3035; --muted:#6b7280; --line:#d9dee5; --play:#0f172a; --accent:#0f172a; --pill:#eceff3; }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }

    .wrap{max-width:760px;margin:0 auto;padding:18px 16px 24px;display:flex;flex-direction:column;gap:16px}
    header{display:flex;align-items:center;justify-content:space-between;gap:10px}
    h1{
      margin:0;
      font-size:clamp(16px,3.8vw,18px);
      font-weight:400;              /* NICHT fett */
      color:var(--muted);           /* dezent */
      letter-spacing:.02em;
    }

    /* Sprachwahl â€“ sehr zurÃ¼ckhaltend */
    .lang{
      display:inline-flex; gap:0; border:1px solid var(--line);
      background:var(--pill); border-radius:999px; overflow:hidden; flex-shrink:0;
    }
    .lang button{
      border:0; background:transparent; color:var(--muted);
      font-weight:600; font-size:12px; padding:6px 12px; display:flex; align-items:center; gap:6px; cursor:pointer;
    }
    .lang button.active{ color:var(--fg); background:#e9edf2; }

    /* Karte wie bei Audio-Cult */
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
      display:flex; flex-direction:column; gap:14px;
    }

    .cover{
      width:100%; aspect-ratio:1/1; object-fit:cover;
      border-radius:12px; border:1px solid var(--line);
      display:block;
      background:#e6eaef;
    }

    /* Track-Titel (unter Cover) â€“ dezent, aber etwas grÃ¶ÃŸer */
    .track-title{
      text-align:center; margin:2px 0 4px;
      font-size:clamp(18px,4.6vw,22px);
      font-weight:500; color:#3a4149;
    }

    /* Fortschrittsleiste â€“ schlank */
    .scrub{display:flex; flex-direction:column; gap:6px}
    .progress{
      position:relative; width:100%; height:7px; border-radius:999px;
      background:#e2e7ee; border:1px solid var(--line);
      cursor:pointer; touch-action:none;
    }
    .bar{position:absolute; left:0; top:0; height:100%; width:0%; background:var(--accent); border-radius:999px}
    .thumb{
      position:absolute; top:50%; transform:translate(-50%,-50%);
      width:16px; height:16px; border-radius:50%;
      background:var(--accent); box-shadow:0 0 0 6px rgba(15,23,42,.08);
    }
    .times{display:flex; justify-content:space-between; font-size:12px; color:var(--muted)}

    /* Controls â€“ zentral, Play groÃŸ, Skip nur Text + kleine Pfeile (AC-Look) */
    .controls{
      display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:10px;
      margin-top:4px;
    }
    .skip{
      display:flex; align-items:center; justify-content:center; gap:6px;
      color:var(--muted); font-weight:600; font-size:14px; cursor:pointer; user-select:none;
      background:transparent; border:0; padding:8px 6px;
    }
    .skip svg{width:18px;height:18px; fill:currentColor; opacity:.65}
    .skip:active{opacity:.8}

    .play{
      width:76px; height:76px; border-radius:50%;
      background:var(--play); color:#fff; border:0; cursor:pointer; display:grid; place-items:center;
      box-shadow:0 8px 22px rgba(15,23,42,.25);
    }
    .play svg{width:30px;height:30px; fill:#fff}

    /* Tempo unten links â€“ dezent wie beim Vorbild */
    .speed{
      display:flex; align-items:center; justify-content:center; gap:8px; flex-wrap:wrap; margin-top:4px;
    }
    .speed .label{font-size:12px; color:var(--muted)}
    .speed button{
      border:1px solid var(--line); background:#eef2f6; color:#2f3640;
      padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer;
    }
    .speed button.active{ border-color:#b7c2cf; box-shadow:0 0 0 1px #b7c2cf inset }

    footer{
      color:var(--muted); text-align:center; font-size:12px; margin-top:6px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    @media (max-width:360px){
      .play{width:70px;height:70px}
      .skip{font-size:13px}
      .lang button{padding:6px 10px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 id="i-title">Audioguide der Ev. Stadtkirche von Hessisch Lichtenau</h1>
      <div class="lang" aria-label="Sprache / Language">
        <button id="btn-de" class="active">ðŸ‡©ðŸ‡ª <span>DE</span></button>
        <button id="btn-en">ðŸ‡¬ðŸ‡§ <span>EN</span></button>
      </div>
    </header>

    <section class="card">
      <img src="cover.jpeg" alt="Cover" class="cover" />

      <div class="track-title" id="trackTitle">Audioguide</div>

      <!-- schlanke Progress-Leiste -->
      <div class="scrub" aria-label="Wiedergabefortschritt">
        <div class="progress" id="progress">
          <div class="bar" id="bar"></div>
          <div class="thumb" id="thumb" style="left:0%"></div>
        </div>
        <div class="times"><span id="cur">0:00</span><span id="dur">0:00</span></div>
      </div>

      <!-- Controls im Audio-Cult-Stil -->
      <div class="controls">
        <!-- Links: 15s zurÃ¼ck (Textbutton + kleiner Pfeil) -->
        <button id="back15" class="skip" aria-label="15 Sekunden zurÃ¼ck">
          <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
          <span>-15s</span>
        </button>

        <!-- Play / Pause (zentral, dunkel) -->
        <button id="btn-play" class="play" aria-label="Abspielen">
          <svg id="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7-11-7z"/></svg>
          <svg id="icon-pause" viewBox="0 0 24 24" style="display:none"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
        </button>

        <!-- Rechts: 15s vor -->
        <button id="fwd15" class="skip" aria-label="15 Sekunden vor">
          <span>+15s</span>
          <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
        </button>
      </div>

      <!-- Tempo -->
      <div class="speed" aria-label="Wiedergabegeschwindigkeit">
        <span class="label" id="i-speed">Tempo</span>
        <button data-rate="0.8">0.8Ã—</button>
        <button data-rate="1" class="active">1Ã—</button>
        <button data-rate="1.1">1.1Ã—</button>
        <button data-rate="1.25">1.25Ã—</button>
      </div>
    </section>

    <footer>Â© <span id="year"></span> Evangelische Stadtkirche Hessisch Lichtenau â€¢ Audioguide</footer>
  </div>

  <audio id="audio" preload="metadata"></audio>

  <script>
    (()=> {
      // Lokale Dateien
      const files = {
        de: "Audioguide Stadtkirche (deutsch).mp3",
        en: "Audioguide Stadtkirche (englisch).mp3"
      };

      // Elemente
      const audio   = document.getElementById("audio");
      const btnPlay = document.getElementById("btn-play");
      const iconPlay= document.getElementById("icon-play");
      const iconPause=document.getElementById("icon-pause");

      const btnDe   = document.getElementById("btn-de");
      const btnEn   = document.getElementById("btn-en");

      const back15  = document.getElementById("back15");
      const fwd15   = document.getElementById("fwd15");

      const progress= document.getElementById("progress");
      const bar     = document.getElementById("bar");
      const thumb   = document.getElementById("thumb");
      const cur     = document.getElementById("cur");
      const dur     = document.getElementById("dur");

      const rateBtns= Array.from(document.querySelectorAll("[data-rate]"));
      const trackTitle = document.getElementById("trackTitle");

      document.getElementById("year").textContent = new Date().getFullYear();

      // Helper
      const fmt = s => (isNaN(s)||!isFinite(s)) ? "0:00" : `${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,"0")}`;
      let lang = localStorage.getItem("hl-lang") || "de";

      function updatePlayIcon(paused){
        iconPlay.style.display = paused ? "block" : "none";
        iconPause.style.display = paused ? "none" : "block";
      }
      function updateProgressUI(){
        if(!audio.duration) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        bar.style.width = pct + "%";
        thumb.style.left = pct + "%";
        cur.textContent = fmt(audio.currentTime);
        dur.textContent = fmt(audio.duration);
      }
      function setSource(){
        audio.src = (lang==="de") ? files.de : files.en;
        trackTitle.textContent = (lang==="de") ? "Audioguide" : "Audio Guide";
        bar.style.width="0%"; thumb.style.left="0%"; cur.textContent="0:00"; dur.textContent="0:00";
        audio.load();
      }
      async function startPlayback(){
        try{ await audio.play(); updatePlayIcon(false); } catch(e){ updatePlayIcon(true); }
      }
      function setLanguage(next){
        lang = next; localStorage.setItem("hl-lang", lang);
        btnDe.classList.toggle("active", lang==="de"); btnEn.classList.toggle("active", lang==="en");
        setSource(); startPlayback(); // Autoplay nach Sprachwechsel
      }

      // Init
      setSource();

      // Sprache
      btnDe.addEventListener("click", ()=> setLanguage("de"));
      btnEn.addEventListener("click", ()=> setLanguage("en"));

      // Controls
      btnPlay.addEventListener("click", ()=> audio.paused ? startPlayback() : (audio.pause(), updatePlayIcon(true)));
      back15.addEventListener("click", ()=>{ audio.currentTime = Math.max(0, audio.currentTime - 15); updateProgressUI(); });
      fwd15 .addEventListener("click", ()=>{ audio.currentTime = Math.min(audio.duration||audio.currentTime+15, audio.currentTime + 15); updateProgressUI(); });

      // Audio Events
      audio.addEventListener("loadedmetadata", updateProgressUI);
      audio.addEventListener("timeupdate", updateProgressUI);
      audio.addEventListener("ended", ()=> updatePlayIcon(true));

      // Scrub / Seek (Tap & Drag)
      let seeking=false;
      function pctFromEvent(e){
        const r = progress.getBoundingClientRect();
        const x = (e.touches ? e.touches[0].clientX : e.clientX) - r.left;
        return Math.min(Math.max(0, x / r.width), 1);
      }
      function seekTo(p){ if(!audio.duration) return; audio.currentTime = p * audio.duration; updateProgressUI(); }
      progress.addEventListener("mousedown", e=>{ seeking=true; seekTo(pctFromEvent(e)); });
      progress.addEventListener("touchstart", e=>{ seeking=true; seekTo(pctFromEvent(e)); }, {passive:true});
      window.addEventListener("mousemove", e=>{ if(seeking) seekTo(pctFromEvent(e)); });
      window.addEventListener("touchmove", e=>{ if(seeking) seekTo(pctFromEvent(e)); }, {passive:true});
      window.addEventListener("mouseup", ()=> seeking=false);
      window.addEventListener("touchend", ()=> seeking=false);

      // Geschwindigkeit (min 0.8x)
      rateBtns.forEach(b=>{
        b.addEventListener("click", ()=>{
          rateBtns.forEach(x=>x.classList.remove("active"));
          b.classList.add("active");
          audio.playbackRate = Math.max(0.8, parseFloat(b.dataset.rate)||1);
        });
      });
    })();
  </script>
</body>
</html>
